<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H√†nh Tr√¨nh Chuy·ªÉn Giao B√≠nh Ng·ªç 2026</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,700;1,900&family=Montserrat:wght@300;400;600;800&family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    
    <style>
        /* =========================================
           1. KHUNG CSS C∆† B·∫¢N (CORE STYLES)
           ========================================= */
        :root {
            --gold: #D4AF37;
            --gold-bright: #FCF6BA;
            --red-deep: #8b0000;
            --red-light: #e63946;
            --dark-bg: #050505;
            --glass-bg: rgba(15, 15, 15, 0.9);
        }

        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body, html {
            margin: 0; padding: 0;
            width: 100%; height: 100%;
            background-color: var(--dark-bg);
            color: #ffffff;
            font-family: 'Montserrat', sans-serif;
            overflow: hidden;
            user-select: none;
        }

        /* Canvas n·ªÅn cho hi·ªáu ·ª©ng */
        #fx-canvas {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: 1;
            pointer-events: none;
        }

        /* ƒê·ªãnh d·∫°ng c√°c ph√¢n ƒëo·∫°n m√†n h√¨nh */
        .screen {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            display: none; /* ·∫®n m·∫∑c ƒë·ªãnh ƒë·ªÉ tr√°nh d∆∞ khung */
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 25px;
            text-align: center;
            z-index: 10;
            opacity: 0;
            transition: opacity 1s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .screen.active {
            display: flex;
            opacity: 1;
        }

        .hidden { display: none !important; }

        /* =========================================
           2. THI·∫æT K·∫æ COMPONENT (UI ELEMENTS)
           ========================================= */
        .glass-box {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            padding: 60px 40px;
            border-radius: 50px;
            border: 1px solid var(--gold);
            max-width: 700px;
            width: 95%;
            box-shadow: 0 0 60px rgba(212, 175, 55, 0.15);
            position: relative;
        }

        .text-shimmer {
            background: linear-gradient(to right, #BF953F, #FCF6BA, #B38728, #FBF5B7, #AA771C);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-family: 'Playfair Display', serif;
            font-weight: 900;
            display: inline-block;
        }

        textarea {
            width: 100%;
            height: 130px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--gold);
            color: #fff;
            border-radius: 20px;
            padding: 20px;
            font-size: 1rem;
            margin-top: 30px;
            resize: none;
            transition: all 0.3s ease;
        }

        textarea:focus {
            background: rgba(255, 255, 255, 0.1);
            box-shadow: 0 0 20px var(--gold);
        }

        .btn-gold {
            background: linear-gradient(45deg, #B38728, #FBF5B7);
            color: #4a0404;
            border: none;
            padding: 18px 45px;
            margin: 20px 10px;
            cursor: pointer;
            font-weight: 800;
            border-radius: 50px;
            text-transform: uppercase;
            letter-spacing: 2px;
            transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 10px 25px rgba(0,0,0,0.4);
        }

        .btn-gold:hover {
            transform: scale(1.1) translateY(-5px);
            box-shadow: 0 15px 35px var(--gold);
        }

        /* Gi·∫•y m·ª•c ti√™u c·ªï ƒëi·ªÉn */
        #paper-scroll {
            background: #fdf5e6;
            color: #2c1810;
            padding: 50px;
            border: 15px double #8b4513;
            width: 100%;
            max-width: 550px;
            transform: rotate(-1deg);
            box-shadow: 15px 15px 40px rgba(0,0,0,0.6);
            position: relative;
        }

        /* L√¨ x√¨ Grid */
        .lixi-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 20px;
            margin-top: 40px;
        }

        .lixi-card {
            width: 100px;
            height: 160px;
            background: linear-gradient(145deg, #ff4d4d, #990000);
            border: 2px solid var(--gold);
            border-radius: 15px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            transition: 0.5s;
            position: relative;
        }

        .lixi-card.opened {
            background: #ffffff !important;
            color: #b30000 !important;
            font-size: 0.9rem;
            font-weight: 900;
            padding: 10px;
            text-align: center;
        }

        /* ƒê·ªìng h·ªì ƒë·∫øm ng∆∞·ª£c */
        .timer-unit {
            display: inline-block;
            margin: 0 15px;
        }
        .timer-unit span {
            display: block;
            font-size: 3.5rem;
            font-weight: 900;
            color: var(--gold);
        }

        #gift-projectile {
            position: fixed;
            width: 80px;
            height: 80px;
            z-index: 9999;
            display: none;
            pointer-events: none;
            filter: drop-shadow(0 0 25px var(--gold));
        }

        @media (max-width: 768px) {
            .lixi-grid { grid-template-columns: repeat(2, 1fr); }
            .timer-unit span { font-size: 2rem; }
            .glass-box { padding: 30px 20px; }
        }
    </style>
</head>
<body>

    <canvas id="fx-canvas"></canvas>
    <img src="https://cdn-icons-png.flaticon.com/512/2169/2169862.png" id="gift-projectile" alt="gift">

    <section id="screen-lock" class="screen">
        <div class="glass-box">
            <h2 class="text-shimmer" style="font-size: 2rem;">CH·ªú ƒê·ª¢I KHO·∫¢NH KH·∫ÆC GIAO TH·ª™A</h2>
            <div id="countdown-display" style="margin-top: 40px;">
                <div class="timer-unit"><span id="days">00</span>NG√ÄY</div>
                <div class="timer-unit"><span id="hours">00</span>GI·ªú</div>
                <div class="timer-unit"><span id="mins">00</span>PH√öT</div>
                <div class="timer-unit"><span id="secs">00</span>GI√ÇY</div>
            </div>
            <p style="margin-top: 40px; color: #aaa; letter-spacing: 2px;">Trang web s·∫Ω t·ª± ƒë·ªông m·ªü c·ª≠a v√†o ƒë√∫ng 00:00 T·∫øt B√≠nh Ng·ªç</p>
        </div>
    </section>

    <section id="screen-1" class="screen">
        <div class="glass-box">
            <h1 class="text-shimmer" style="font-size: 3rem; margin: 0;">·∫§T T·ª¥ - B√çNH NG·ªå</h1>
            <p style="font-size: 1.1rem; line-height: 1.8; margin-top: 30px; color: #ddd;">
                "2025 ƒë√£ qua r·ªìi, b·∫°n c√≤n luy·∫øn ti·∫øc g√¨ kh√¥ng? <br>
                N·∫øu c√≤n th√¨ h√£y suy ng·∫´m l·∫°i, kh√¥ng th√¨ h√£y b·∫Øt ƒë·∫ßu m·ªôt h√†nh tr√¨nh m·ªõi th√†nh c√¥ng h∆°n nƒÉm 2025 b·∫°n nh√©!"
            </p>
            <div id="initial-actions">
                <button class="btn-gold" onclick="triggerRegretMode()">Suy ng·∫´m l·∫°i 2025</button>
                <button class="btn-gold" onclick="jumpTo2026()">Ti·∫øn t·ªõi 2026</button>
            </div>
            <div id="input-regret-area" class="hidden">
                <textarea id="data-2025" placeholder="Nh·ªØng ƒëi·ªÅu ch∆∞a tr·ªçn v·∫πn trong nƒÉm c≈©..."></textarea>
                <br>
                <button class="btn-gold" onclick="launchGift('2025')">G√≥i gh√©m & G·ª≠i qu√† ‚ú®</button>
            </div>
        </div>
    </section>

    <section id="screen-2" class="screen">
        <div class="glass-box">
            <h2 class="text-shimmer" style="font-size: 2.5rem;">KHAI H·ªéA T∆Ø∆†NG LAI</h2>
            <p>Vi·∫øt xu·ªëng ƒë·ªãnh h∆∞·ªõng l·ªõn nh·∫•t c·ªßa b·∫°n trong nƒÉm 2026:</p>
            <textarea id="data-2026" placeholder="T√¥i quy·∫øt t√¢m s·∫Ω ƒë·∫°t ƒë∆∞·ª£c..."></textarea>
            <br>
            <button class="btn-gold" onclick="launchGift('2026')">Khai h·ªèa üöÄ</button>
        </div>
    </section>

    <section id="screen-3" class="screen">
        <div id="paper-scroll">
            <h2 style="font-family: 'Playfair Display'; color: #b30000; border-bottom: 3px solid #b30000; padding-bottom: 10px;">M·ª§C TI√äU - QUY·∫æT T√ÇM</h2>
            <div style="text-align: left; margin-top: 30px; line-height: 1.6;">
                <p><strong>üî• D·∫§U ·∫§N 2025:</strong> <br><span id="view-2025" style="color: #444;"></span></p>
                <p><strong>üéØ QUY·∫æT T√ÇM 2026:</strong> <br><span id="view-2026" style="font-weight: 800; color: #000;"></span></p>
            </div>
        </div>
        <button class="btn-gold" style="margin-top: 40px;" onclick="goToLixi()">H√°i L·ªôc ƒê·∫ßu Xu√¢n üßß</button>
    </section>

    <section id="screen-4" class="screen">
        <h2 class="text-shimmer" style="font-size: 3rem;">L·ªòC XU√ÇN MAY M·∫ÆN</h2>
        <p>Ch·ªçn 1 bao duy nh·∫•t - H·ªá th·ªëng s·∫Ω t·ª± ch·ª•p m√†n h√¨nh t·∫∑ng b·∫°n</p>
        <div class="lixi-grid" id="lixi-wrap"></div>
    </section>

    <section id="screen-5" class="screen">
        <h1 class="text-shimmer" style="font-size: 5rem; margin: 0;">2026</h1>
        <p style="font-family: 'Dancing Script'; font-size: 3rem; color: #fff; text-shadow: 0 0 20px var(--gold);">
            "NƒÉm 2026 Phong ch√∫c b·∫°n b√¨nh an, ·∫•m no b√™n gia ƒë√¨nh"
        </p>
        <div id="history-notice" style="margin-top: 30px; opacity: 0.5;"></div>
    </section>

    <script>
        /* --- KH·ªûI T·∫†O BI·∫æN TO√ÄN C·ª§C --- */
        const canvas = document.getElementById('fx-canvas');
        const ctx = canvas.getContext('2d');
        const giftIcon = document.getElementById('gift-projectile');
        let particles = [];
        let fireworks = [];
        let mouseX = -100, mouseY = -100;
//---------------------------------------------------------------------------------------------Kh√≥a th·ªùi gian---------------------------------------------------
        /* --- C·∫§U H√åNH TH·ªúI GIAN GIAO TH·ª™A --- */
        // T·∫øt B√≠nh Ng·ªç: 00:00:00 ng√†y 17/02/2026
        //const TET_TIME = new Date("January 2, 2026 18:14:00").getTime(); //------------------code tets
        const TET_TIME = new Date("February 17, 2026 00:00:00").getTime();
        /* --- ENGINE PH√ÅO HOA & H·∫†T --- */
        class Particle {
            constructor(x, y, color, velocity) {
                this.x = x; this.y = y;
                this.color = color;
                this.velocity = velocity;
                this.alpha = 1;
                this.friction = 0.95;
            }
            draw() {
                ctx.save();
                ctx.globalAlpha = this.alpha;
                ctx.beginPath();
                ctx.arc(this.x, this.y, 2, 0, Math.PI * 2);
                ctx.fillStyle = this.color;
                ctx.fill();
                ctx.restore();
            }
            update() {
                this.velocity.x *= this.friction;
                this.velocity.y *= this.friction;
                this.x += this.velocity.x;
                this.y += this.velocity.y;
                this.alpha -= 0.01;
            }
        }

        function createExplosion(x, y) {
            const count = 80;
            const angleStep = (Math.PI * 2) / count;
            for (let i = 0; i < count; i++) {
                particles.push(new Particle(x, y, `hsl(${Math.random() * 360}, 50%, 50%)`, {
                    x: Math.cos(angleStep * i) * Math.random() * 10,
                    y: Math.sin(angleStep * i) * Math.random() * 10
                }));
            }
        }

        /* --- QU·∫¢N L√ù CANVAS --- */
        function initCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }

        window.addEventListener('resize', initCanvas);
        window.addEventListener('mousemove', (e) => {
            mouseX = e.clientX; mouseY = e.clientY;
            // Hi·ªáu ·ª©ng ph√°o hoa li ti theo chu·ªôt
            if (Math.random() > 0.8) {
                createExplosion(mouseX, mouseY);
            }
        });

        function renderLoop() {
            ctx.fillStyle = 'rgba(5, 5, 5, 0.1)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            particles.forEach((p, i) => {
                if (p.alpha > 0) {
                    p.update(); p.draw();
                } else {
                    particles.splice(i, 1);
                }
            });
            requestAnimationFrame(renderLoop);
        }

        /* --- LOGIC ƒê·∫æM NG∆Ø·ª¢C & KI·ªÇM TRA TR·∫†NG TH√ÅI --- */
        function runCountdown() {
            const now = new Date().getTime();
            const distance = TET_TIME - now;

            if (distance > 0) {
                document.getElementById('screen-lock').classList.add('active');
                const d = Math.floor(distance / (1000 * 60 * 60 * 24));
                const h = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const m = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const s = Math.floor((distance % (1000 * 60)) / 1000);

                document.getElementById('days').innerText = d < 10 ? '0'+d : d;
                document.getElementById('hours').innerText = h < 10 ? '0'+h : h;
                document.getElementById('mins').innerText = m < 10 ? '0'+m : m;
                document.getElementById('secs').innerText = s < 10 ? '0'+s : s;
                return false;
            } else {
                return true;
            }
        }

        /* --- ƒêI·ªÄU H∆Ø·ªöNG M√ÄN H√åNH --- */
        function switchScreen(from, to) {
            document.getElementById(from).classList.remove('active');
            setTimeout(() => {
                document.getElementById(from).style.display = 'none';
                const toEl = document.getElementById(to);
                toEl.style.display = 'flex';
                setTimeout(() => toEl.classList.add('active'), 50);
            }, 800);
        }

        /* --- X·ª¨ L√ù T∆Ø∆†NG T√ÅC --- */
        function triggerRegretMode() {
            document.getElementById('initial-actions').classList.add('hidden');
            document.getElementById('input-regret-area').classList.remove('hidden');
        }

        function jumpTo2026() {
            switchScreen('screen-1', 'screen-2');
        }

        function launchGift(year) {
            giftIcon.style.display = 'block';
            giftIcon.style.left = '50%';
            giftIcon.style.top = '80%';
            giftIcon.style.opacity = '1';

            let yPos = 80;
            let rot = 0;
            const fly = setInterval(() => {
                yPos -= 2;
                rot += 15;
                giftIcon.style.top = yPos + '%';
                giftIcon.style.transform = `translateX(-50%) rotate(${rot}deg) scale(${1 + (80-yPos)/50})`;
                
                if (yPos < -15) {
                    clearInterval(fly);
                    giftIcon.style.display = 'none';
                    if (year === '2025') switchScreen('screen-1', 'screen-2');
                    else finalizeGoals();
                }
            }, 16);
        }

        function finalizeGoals() {
            document.getElementById('view-2025').innerText = document.getElementById('data-2025').value || "M·ªçi luy·∫øn ti·∫øc ƒë√£ ƒë∆∞·ª£c g√≥i gh√©m l·∫°i.";
            document.getElementById('view-2026').innerText = document.getElementById('data-2026').value || "N·ªó l·ª±c h·∫øt m√¨nh v√¨ m·ªôt nƒÉm r·ª±c r·ª°.";
            switchScreen('screen-2', 'screen-3');
            createExplosion(canvas.width/2, canvas.height/2);
        }

        function goToLixi() {
            switchScreen('screen-3', 'screen-4');
            const wrap = document.getElementById('lixi-wrap');
            const rewards = ["100.000 VNƒê", "V·∫°n S·ª± Nh∆∞ √ù", "B√¨nh An", "S·ª©c Kh·ªèe", "Th√†nh C√¥ng", "H·∫°nh Ph√∫c", "Ph√°t T√†i", "May M·∫Øn", "T·∫•n T·ªõi", "An Khang"].sort(() => Math.random() - 0.5);

            rewards.forEach((r, i) => {
                const div = document.createElement('div');
                div.className = 'lixi-card';
                div.innerHTML = 'üßß';
                div.onclick = function() {
                    if (document.querySelector('.lixi-card.opened')) return;
                    this.classList.add('opened');
                    this.innerHTML = `<span>${r}</span>`;
                    localStorage.setItem('tet2026_done', 'true');
                    createExplosion(window.innerWidth/2, window.innerHeight/2);

                    setTimeout(() => {
                        html2canvas(document.body).then(cv => {
                            const a = document.createElement('a');
                            a.download = 'loc-binh-ngo.png';
                            a.href = cv.toDataURL();
                            a.click();
                            
                            setTimeout(() => {
                                document.querySelectorAll('.lixi-card').forEach((lx, idx) => {
                                    lx.classList.add('opened');
                                    lx.innerHTML = rewards[idx];
                                });
                                setTimeout(() => switchScreen('screen-4', 'screen-5'), 4000);
                            }, 1000);
                        });
                    }, 1000);
                };
                wrap.appendChild(div);
            });
        }

        /* --- KH·ªûI CH·∫†Y H·ªÜ TH·ªêNG --- */
        initCanvas();
        renderLoop();

        const timerInterval = setInterval(() => {
            const isTet = runCountdown();
            if (isTet) {
                clearInterval(timerInterval);
                // N·∫øu ƒë√£ xong h·∫øt l·∫ßn tr∆∞·ªõc th√¨ v√†o lu√¥n m√†n k·∫øt
                if (localStorage.getItem('tet2026_done')) { //---------------------------------------------------------ch·ªó n√†y if (false && localStorage.getItem('tet2026_done')) -- ƒë·ªÉ test code
                    document.getElementById('screen-lock').style.display = 'none';
                    document.getElementById('screen-5').style.display = 'flex';
                    document.getElementById('screen-5').classList.add('active');
                    document.getElementById('history-notice').innerText = "(B·∫°n ƒë√£ nh·∫≠n l·ªôc ƒë·∫ßu xu√¢n r·ªìi!)";
                } else {
                    document.getElementById('screen-lock').style.display = 'none';
                    document.getElementById('screen-1').style.display = 'flex';
                    document.getElementById('screen-1').classList.add('active');
                }
            }
        }, 1000);
    </script>
</body>
</html>
